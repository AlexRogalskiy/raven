this.transfer=function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=5)}({3:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=JSON.stringify,i=function(){function t(){this.data={}}return t.prototype.setItem=function(t,e){this.data[t]=e},t.prototype.getItem=function(t){return this.data[t]},t.prototype.removeItem=function(t){delete this.data[t]},t.prototype.clear=function(){this.data={}},t}();e.Storage=i;var s=null,u=function(){function t(e){this.type=t,this._storage=new i,this.keys=[],this.name=e}return t.bindRealStorage=function(t){s=t},Object.defineProperty(t.prototype,"storage",{get:function(){return s||this._storage},enumerable:!0,configurable:!0}),t.prototype.set=function(t,e){return this.storage.setItem(this.name+":"+t,o(e)),-1===this.keys.indexOf(t)&&this.keys.push(t),e},t.prototype.get=function(t){var e=this.storage.getItem(this.name+":"+t);return e?JSON.parse(e):null},t.prototype.has=function(t){return this.keys.indexOf(t)>=0},t.prototype.remove=function(t){this.storage.removeItem(this.name+":"+t);var e=this.keys.indexOf(t);e>=0&&this.keys.splice(e,1)},t.prototype.clear=function(){this.storage.clear(),this.keys=[]},t.prototype.merge=function(t){for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];this.set(e,n)}},t.prototype.toJS=function(){for(var t={},e=0,n=this.keys;e<n.length;e++){var r=n[e];t[r]=this.get(r)}return t},t}();e.Store=u;var c=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e,n}return r(e,t),Object.defineProperty(e.prototype,"length",{get:function(){return this.collect().length},enumerable:!0,configurable:!0}),e.prototype.collect=function(){return this.get("collection")||[]},e.prototype.push=function(t){var e=this.collect();return e.push(t),this._update(e),e.length},e.prototype.pop=function(){var t=this.collect(),e=t.pop();return this._update(t),e},e.prototype.shift=function(){var t=this.collect(),e=t.shift();return this._update(t),e},e.prototype.unshift=function(t){var e=this.collect();return e.unshift(t),this._update(e),e.length},e.prototype._update=function(t){this.set("collection",t),this.set("length",t.length)},e}(u);e.CollectionStore=c},5:function(t,e,n){"use strict";function r(t){return t}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),i=function(){function t(t,e){void 0===e&&(e=r),this.queue=[],this.running=!1,this.name=t,this.configStore=new o.Store("transfer:"+t),this.transfer=e}return t.prototype.config=function(t,e){if("string"==typeof t){var n=t;this.configStore.set(n,e)}else for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];this.config(n,r)}},t.prototype.send=function(t){var e=this,n=t.data;t.sent;this.queue.push(function(){return new Promise(function(r,o){e.transfer.call(e,e.extendMessage(n)).then(function(){t.sent=!0}).then(r).catch(o)})}),this.running||this.run()},t.prototype.extendMessage=function(t){return this.configStore.has("user")&&(t.user=this.configStore.get("user")),this.configStore.has("tags")&&(t.tags=this.configStore.get("tags")),this.configStore.has("extra")&&(t.extra=this.configStore.get("extra")),this.configStore.has("release")&&(t.release=this.configStore.get("release")),this.configStore.has("environment")&&(t.environment=this.configStore.get("environment")),t},t.prototype.run=function(){var t=this,e=this.queue.splice(0,1)[0];e?(this.running=!0,e().then(function(){return t.run()})):this.running=!1},t}();e.default=i}});
//# sourceMappingURL=transfer.js.map